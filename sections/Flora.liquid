{% schema %}
{
  "name": "Flora",
  "settings": [
    {
      "type": "text",
      "id": "badge",
      "label": "Top Label",
      "default": "MEET RETINART™"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Science-forward skin renewal, reimagined for real life."
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p><strong>RetinART™ </strong>is a patent‑pending active derived from sustainable microalgae, clinically shown to deliver retinol‑like results—without irritation, peeling, or sensitivity.</p>"
    },
    {
      "type": "text",
      "id": "accordion1_title",
      "label": "Accordion 1 Title",
      "default": "What It Does"
    },
    {
      "type": "richtext",
      "id": "accordion1_text",
      "label": "Accordion 1 Content",
      "default": "<p>Locks in hydration, calms stressed skin, and supports your skin barrier with marine-derived actives.</p>"
    },
    {
      "type": "text",
      "id": "accordion2_title",
      "label": "Accordion 2 Title",
      "default": "How It Works"
    },
    {
      "type": "richtext",
      "id": "accordion2_text",
      "label": "Accordion 2 Content",
      "default": "<p>Powered by sustainable microalgae and adaptogens, this blend replenishes skin before, during, and after environmental stress.</p>"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Right Image"
    },
    {
      "type": "text",
      "id": "image_text",
      "label": "Overlay Text on Image",
      "default": "Waterless. Performance-backed. Skin that feels like yours."
    }
  ],
  "presets": [
    {
      "name": "Flora Section"
    }
  ]
}
{% endschema %}

<div class="flora-section">
  <div class="flora-wrapper">

    <!-- TEXT LEFT -->
    <div class="flora-left">
      {% if section.settings.badge != blank %}
        <span class="flora-badge">{{ section.settings.badge }}</span>
      {% endif %}

      {% if section.settings.heading != blank %}
        <h2 class="flora-heading">{{ section.settings.heading }}</h2>
      {% endif %}

      {% if section.settings.description != blank %}
        <div class="flora-description">{{ section.settings.description }}</div>
      {% endif %}

      <!-- Accordion -->
      <div class="flora-accordion">
        <div class="flora-accordion-item">
          <button class="flora-accordion-header">{{ section.settings.accordion1_title }}</button>
          <div class="flora-accordion-content">
            {{ section.settings.accordion1_text }}
          </div>
        </div>
        <div class="flora-accordion-item">
          <button class="flora-accordion-header">{{ section.settings.accordion2_title }}</button>
          <div class="flora-accordion-content">
            {{ section.settings.accordion2_text }}
          </div>
        </div>
      </div>
    </div>

    <!-- IMAGE RIGHT -->
    <div class="flora-right">
      {% if section.settings.image != blank %}
        <div class="flora-image" style="background-image: url({{ section.settings.image | img_url: '2000x' }});">
          {% if section.settings.image_text != blank %}
            <p class="flora-overlay">{{ section.settings.image_text }}</p>
          {% endif %}
        </div>
      {% endif %}
    </div>

  </div>
</div>

<style>
.flora-section {
  background: #F4F3EC;
  width: 100%;
  margin-top: 30px;
}

/* Desktop flex layout: text left, image right */
.flora-wrapper {
  display: flex;
  flex-wrap: wrap;
  align-items: stretch;
  width: 100%;
}

/* TEXT LEFT */
.flora-left {
  flex: 1 1 50%;
  padding: 80px 60px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

/* IMAGE RIGHT */
.flora-right {
  flex: 1 1 50%;
  padding: 0;
  margin: 0;
  display: flex;
}

.flora-image {
  flex: 1;
  background-size: cover;
  background-position: center;
  width: 100%;
  min-height: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  position: relative;
}

.flora-overlay {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  color: #d6d636;
  font-family: cursive;
  font-size: 1.6rem;
  text-align: center;
  max-width: 80%;
}

.flora-badge {
  color: #6a7de7;
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 600;
  margin-bottom: 10px;
  display: block;
}

.flora-heading {
  font-size: 32px;
  font-weight: 600;
  line-height: 1.3;
  margin: 10px 0 20px;
  font-family: Georgia, serif;
}

.flora-description {
  margin-bottom: 25px;
  line-height: 1.6;
  font-size: 18px;
  color: #000;
}

.flora-accordion {
  border-top: 1px solid #ccc;
  margin-top: 10px;
}

.flora-accordion-item {
  border-bottom: 1px solid #ccc;
}

.flora-accordion-header {
  width: 100%;
  background: none;
  border: none;
  text-align: left;
  font-size: 18px;
  font-weight: 500;
  padding: 15px 0;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
}

.flora-accordion-header::after {
  content: "";
  display: inline-block;
  width: 8px;
  height: 8px;
  border-right: 1.5px solid #000;
  border-bottom: 1.5px solid #000;
  transform: rotate(45deg);
  margin-left: 10px;
  transition: transform 0.25s ease;
}

.flora-accordion-item.active .flora-accordion-header::after {
  transform: rotate(-135deg);
}

.flora-accordion-content {
  display: none;
  padding: 0 0 15px;
  font-size: 16px;
  line-height: 1.5;
  color: #000;
}

.flora-accordion-item.active .flora-accordion-content {
  display: block;
}

/* Responsive Mobile: image stacks on top */
@media(max-width: 768px) {
  .flora-left, .flora-right {
    flex: 1 1 100%;
  }
  .flora-wrapper {
    flex-direction: column;
  }
  .flora-right { order: 1; } /* image first */
  .flora-left { order: 2; } /* text second */
  .flora-image { height: 400px; }
  .flora-right { padding: 0; }
  .flora-left { padding: 40px 20px; }
  .flora-accordion-header { font-size: 16px; }
  .flora-overlay { font-size: 1.1rem; padding: 0 10px; }
}
</style>

<script>
document.querySelectorAll('.flora-accordion-header').forEach(header => {
  header.addEventListener('click', () => {
    const item = header.parentElement;
    item.classList.toggle('active');
  });
});
</script>